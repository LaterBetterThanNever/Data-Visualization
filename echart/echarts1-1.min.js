// 必须修改好id 并记录下来！
var myChart = echarts.init(document.getElementById('chart1-1'));


var dataMap = {};
function dataFormatter(obj) {
    var pList = ['杭州','宁波','嘉兴','湖州','绍兴','舟山','温州','金华','衢州','台州','丽水'];
    var temp;
    for (var year = 2010; year <= 2017; year++) {
        var max = 0;
        var sum = 0;
        temp = obj[year];
        for (var i = 0, l = temp.length; i < l; i++) {
            max = Math.max(max, temp[i]);
            sum += temp[i];
            obj[year][i] = {
                name : pList[i],
                value : temp[i]
            }
        }
        obj[year + 'max'] = Math.floor(max / 100) * 100;
        obj[year + 'sum'] = sum;
    }
    return obj;
}

dataMap.dataGDP = dataFormatter({
    //max : 60000,
    2017:[12603.36,9842.06,4380.52,2476.13,5078.37,1219.78,5411.59,3848.62,1331.27,4388.22,1250.92],
    2016:[11313.72,8686.49,3862.11,2284.37,4789.03,1241.20,5101.56,3684.94,1251.59,3898.66,1210.24],
    2015:[10050.21,8003.61,3517.81,2084.26,4465.97,1092.85,4618.08,3402.34,1146.13,3553.85,1103.29],
    2014:[9206.16,7610.28,3352.60,1956.00,4265.88,1015.26,4303.05,3208.20,1115.10,3387.38,1051.75],
    2013:[8343.52,7128.87,3147.66,1803.15,3967.29,930.85,4003.86,2958.78,1056.57,3153.34,983.08],
    2012:[7802.01,6582.21,2890.57,1664.30,3654.03,853.18,3669.18,2710.77,972.25,2911.26,894.10],
    2011:[7019.06,6059.24,2677.09,1520.06,3332.00,772.75,3418.53,2458.07,919.62,2794.91,798.22],
    2010:[5949.17,5163.00,2300.20,1301.73,2795.20,644.32,2925.04,2110.04,755.48,2426.45,663.29]
});

dataMap.dataPI = dataFormatter({
    //max : 4000,
 	2017:[311.08,305.81,135.55,129.12,207.54,140.48,144.35,145.62,87.40,268.26,99.44],
    2016:[304.21,302.06,136.91,127.42,207.66,126.71,139.56,148.32,88.23,254.14,95.63],
    2015:[287.95,284.68,139.09,122.60,198.94,111.01,129.57,141.03,84.46,229.75,91.36],
    2014:[274.35,275.70,144.77,120.34,194.28,100.90,117.94,138.56,82.64,215.63,88.56],
    2013:[265.42,276.35,155.62,125.56,193.27,95.73,115.39,140.20,83.15,213.30,84.65],
    2012:[255.11,268.52,151.39,122.65,184.80,83.06,114.22,134.46,79.75,200.91,79.37],
    2011:[236.77,255.23,142.80,116.22,172.10,76.04,107.88,125.43,76.15,188.90,72.62],
    2010:[208.41,219.13,127.00,104.22,149.67,62.02,93.69,108.03,64.68,160.42,62.93]
});

dataMap.dataSI = dataFormatter({
    //max : 26600,
  	2017:[4362.48,5119.45,2317.92,1171.75,2472.50,402.85,2149.91,1626.63,587.02,1938.37,507.50],
    2016:[4120.93,4455.34,2010.50,1099.47,2398.27,510.04,2096.45,1643.43,564.58,1695.80,543.42],
    2015:[3909.01,4098.22,1850.68,1021.05,2252.87,449.63,2022.59,1549.15,534.83,1567.65,503.91],
    2014:[3845.58,3980.41,1813.67,999.10,2213.48,425.27,2029.70,1508.36,558.90,1578.85,505.57],
    2013:[3661.98,3741.72,1726.73,953.19,2102.93,411.54,2015.48,1445.70,555.92,1515.55,497.87],
    2012:[3572.63,3516.84,1603.08,886.42,1962.41,382.94,1852.99,1344.69,516.34,1419.47,449.50],
    2011:[3323.79,3349.53,1537.26,817.71,1834.34,349.16,1760.72,1246.09,511.02,1443.97,401.78],
    2010:[2844.07,2870.69,1339.57,715.01,1566.61,293.29,1533.46,1086.02,414.46,1254.33,328.60]
    
});

dataMap.dataTI = dataFormatter({
    //max : 25000,
  	2017:[7929.80,4416.80,1927.05,1175.26,2398.33,676.44,3117.34,2076.37,656.84,2181.59,643.98],
    2016:[6888.59,3929.10,1714.70,1057.49,2183.11,604.45,2865.55,1893.19,598.78,1948.73,571.19],
    2015:[5853.25,3620.71,1528.04,940.60,2014.15,532.21,2465.92,1712.16,526.84,1756.45,508.02],
    2014:[5086.24,3354.17,1394.17,836.56,1858.12,489.09,2155.41,1561.29,473.56,1592.89,457.63],
    2013:[4416.12,3110.80,1265.31,724.40,1671.09,423.57,1872.99,1372.88,417.51,1424.49,400.56],
    2012:[3974.27,2796.85,1136.10,655.24,1506.82,387.18,1701.98,1231.62,376.16,1290.87,365.23],
    2011:[3458.50,2454.49,997.03,586.13,1325.56,347.55,1549.94,1086.55,332.44,1162.04,323.82],
    2010:[2896.69,2073.18,833.63,482.50,1078.93,289.00,1297.89,902.05,276.34,1011.70,258.97]
});

dataMap.dataEstate = dataFormatter({
    //max : 3600,
 	2017:[5856.65,5009.58,3009.64,1730.98,3115.67,1450.31,4178.49,2200.52,1047.78,2518.26,903.84],
    2016:[5842.42,4961.39,2790.16,1592.18,2882.48,1311.14,3905.74,2084.01,981.74,2272.63,841.65],
    2015:[5556.32,4506.58,2513.82,1402.64,2582.84,1134.76,3456.39,1836.16,882.04,1996.03,751.52],
    2014:[4952.70,3989.46,2221.21,1242.92,2304.68,960.88,3052.81,1594.79,782.10,1765.93,665.08],
    2013:[4263.87,3422.95,1910.15,1070.05,2001.99,750.02,2618.16,1364.36,670.72,1507.87,570.42],
    2012:[3722.75,2901.43,1642.31,970.73,1722.56,570.60,2110.34,1126.80,566.13,1242.56,471.98],
    2011:[3100.02,1630.56,1488.27,804.67,1426.26,476.09,1540.31,862.83,504.63,1007.81,358.47],
    2010:[2753.13,2193.28,1488.26,719.98,1245.56,413.84,925.98,772.80,481.80,950.24,320.38]
});

dataMap.dataIncome = dataFormatter({
    //max : 3200,
 	2017:[2921.30,2415.61,769.31,408.89,705.53,187.22,778.26,601.18,174.48,656.97,180.46],
    2016:[2558.41,2145.72,673.37,360.89,630.08,173.29,723.96,555.19,155.03,583.83,164.87],
    2015:[2238.75,2072.63,638.80,327.82,602.19,159.59,677.92,516.96,143.99,539.78,151.66],
    2014:[1920.11,1790.89,568.09,295.71,546.34,148.93,612.44,461.40,126.82,485.29,135.02],
    2013:[1734.98,1651.18,517.49,271.66,502.15,137.42,565.63,415.96,118.21,448.47,124.22],
    2012:[1627.89,1536.51,471.92,246.88,469.31,133.45,517.89,376.47,106.39,408.95,112.66],
    2011:[1488.92,1431.76,416.00,219.08,426.45,127.18,485.62,328.35,95.02,370.47,100.09],
    2010:[1245.43,1171.75,334.33,172.35,349.25,98.53,411.43,272.68,75.35,310.62,76.84]
});


option = {
    baseOption: {
        timeline: {
            // y: 0,
            axisType: 'category',
            // realtime: false,
            // loop: false,
            autoPlay: true,
            // currentIndex: 2,
            playInterval: 1000,
            // controlStyle: {
            //     position: 'left'
            // },
            data: [
                '2010-01-01','2011-01-01','2012-01-01',
                {
                    value: '2013-01-01',
                    tooltip: {
                        formatter: '{b} GDP达到一个高度'
                    },
                    symbol: 'diamond',
                    symbolSize: 16
                },
                '2014-01-01', '2015-01-01','2016-01-01',
                {
                    value: '2017-01-01',
                    tooltip: {
                        formatter: function (params) {
                            return params.name + 'GDP达到又一个高度';
                        }
                    },
                    symbol: 'diamond',
                    symbolSize: 18
                },
            ],
            label: {
                formatter : function(s) {
                    return (new Date(s)).getFullYear();
                }
            }
        },
        title: {
            subtext: '数据来自浙江省统计局'
        },
        tooltip: {},
        legend: {
            x: 'right',
            data: ['第一产业', '第二产业', '第三产业', 'GDP', '财政总收入', '固定资产投资'],
            selected: {
                'GDP': false, '财政总收入': false, '固定资产投资': false
            }
        },
        calculable : true,
        grid: {
            top: 80,
            bottom: 100
        },
        xAxis: [
            {
                'type':'category',
                'axisLabel':{'interval':0},
                'data':[
                    '杭州','宁波','嘉兴','湖州','绍兴','舟山','温州','金华','衢州','台州','丽水'
                ],
                splitLine: {show: false}
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: 'GDP（亿元）',
                // max: 53500
                max: 15000
            }
        ],
        series: [
            {name: 'GDP', type: 'bar'},
            {name: '财政总收入', type: 'bar'},
            {name: '固定资产投资', type: 'bar'},
            {name: '第一产业', type: 'bar'},
            {name: '第二产业', type: 'bar'},
            {name: '第三产业', type: 'bar'},
            {
                name: 'GDP占比',
                type: 'pie',
                center: ['75%', '35%'],
                radius: '28%'
            }
        ]
    },
    options: [
        {
            title: {text: '2010浙江省宏观经济指标'},
            series: [
                {data: dataMap.dataGDP['2010']},
                {data: dataMap.dataIncome['2010']},
                {data: dataMap.dataEstate['2010']},
                {data: dataMap.dataPI['2010']},
                {data: dataMap.dataSI['2010']},
                {data: dataMap.dataTI['2010']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2010sum']},
                    {name: '第二产业', value: dataMap.dataSI['2010sum']},
                    {name: '第三产业', value: dataMap.dataTI['2010sum']}
                ]}
            ]
        },
        {
            title : {text: '2011浙江省宏观经济指标'},
            series : [
                {data: dataMap.dataGDP['2011']},
                {data: dataMap.dataIncome['2011']},
                {data: dataMap.dataEstate['2011']},
                {data: dataMap.dataPI['2011']},
                {data: dataMap.dataSI['2011']},
                {data: dataMap.dataTI['2011']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2011sum']},
                    {name: '第二产业', value: dataMap.dataSI['2011sum']},
                    {name: '第三产业', value: dataMap.dataTI['2011sum']}
                ]}
            ]
        },
        {
            title : {text: '2012浙江省宏观经济指标'},
            series : [
                {data: dataMap.dataGDP['2012']},
                {data: dataMap.dataIncome['2012']},
                {data: dataMap.dataEstate['2012']},
                {data: dataMap.dataPI['2012']},
                {data: dataMap.dataSI['2012']},
                {data: dataMap.dataTI['2012']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2012sum']},
                    {name: '第二产业', value: dataMap.dataSI['2012sum']},
                    {name: '第三产业', value: dataMap.dataTI['2012sum']}
                ]}
            ]
        },
        {
            title : {text: '2013浙江省宏观经济指标'},
            series : [
                {data: dataMap.dataGDP['2013']},
                {data: dataMap.dataIncome['2013']},
                {data: dataMap.dataEstate['2013']},
                {data: dataMap.dataPI['2013']},
                {data: dataMap.dataSI['2013']},
                {data: dataMap.dataTI['2013']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2013sum']},
                    {name: '第二产业', value: dataMap.dataSI['2013sum']},
                    {name: '第三产业', value: dataMap.dataTI['2013sum']}
                ]}
            ]
        },
        {
            title : {text: '2014浙江省宏观经济指标'},
            series : [
                {data: dataMap.dataGDP['2014']},
                {data: dataMap.dataIncome['2014']},
                {data: dataMap.dataEstate['2014']},
                {data: dataMap.dataPI['2014']},
                {data: dataMap.dataSI['2014']},
                {data: dataMap.dataTI['2014']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2014sum']},
                    {name: '第二产业', value: dataMap.dataSI['2014sum']},
                    {name: '第三产业', value: dataMap.dataTI['2014sum']}
                ]}
            ]
        },
        {
            title : {text: '2015浙江省宏观经济指标'},
            series : [
                {data: dataMap.dataGDP['2015']},
                {data: dataMap.dataIncome['2015']},
                {data: dataMap.dataEstate['2015']},
                {data: dataMap.dataPI['2015']},
                {data: dataMap.dataSI['2015']},
                {data: dataMap.dataTI['2015']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2015sum']},
                    {name: '第二产业', value: dataMap.dataSI['2015sum']},
                    {name: '第三产业', value: dataMap.dataTI['2015sum']}
                ]}
            ]
        },
        {
            title : {text: '2016浙江省宏观经济指标'},
            series : [
                {data: dataMap.dataGDP['2016']},
                {data: dataMap.dataIncome['2016']},
                {data: dataMap.dataEstate['2016']},
                {data: dataMap.dataPI['2016']},
                {data: dataMap.dataSI['2016']},
                {data: dataMap.dataTI['2016']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2016sum']},
                    {name: '第二产业', value: dataMap.dataSI['2016sum']},
                    {name: '第三产业', value: dataMap.dataTI['2016sum']}
                ]}
            ]
        },
        {
            title : {text: '2017浙江省宏观经济指标'},
            series : [
                {data: dataMap.dataGDP['2017']},
                {data: dataMap.dataIncome['2017']},
                {data: dataMap.dataEstate['2017']},
                {data: dataMap.dataPI['2017']},
                {data: dataMap.dataSI['2017']},
                {data: dataMap.dataTI['2017']},
                {data: [
                    {name: '第一产业', value: dataMap.dataPI['2017sum']},
                    {name: '第二产业', value: dataMap.dataSI['2017sum']},
                    {name: '第三产业', value: dataMap.dataTI['2017sum']}
                ]}
            ]
        }
    ]
};
;

// 使用刚指定的配置项和数据显示图表。
myChart.setOption(option);